---
import BaseLayout from "../../../../layouts/BaseLayout.astro";

const title = "Useless Box: Hardware Control vs Arduino “Personalities”";
const subtitle =
  "Electromechanical ‘anti-user’ box that flips its own switch off; compared hardware-only logic vs Arduino personalities (with demo video).";

const overview = {
  goal:
    "Build a reliable electromechanical mechanism that detects the switch state and drives a motorized finger to flip it back—then explore how software changes the user experience.",
  built:
    "A small enclosure with a motor-driven finger. Version A uses hardware-focused logic and endstops; Version B uses Arduino state-machine control and multiple behavior patterns.",
  role:
    "Team project. I focused on wiring/soldering, switch mounting + alignment, motor direction control, and reliability debugging. I also helped implement and tune Arduino behavior patterns.",
  tech:
    "Mechatronics integration, limit switches, motor forward/reverse, Arduino digital I/O (INPUT_PULLUP), state machines, debouncing/timing debugging.",
};

const howItWorksA = [
  "User flips the toggle ON → motor drives forward → finger reaches the switch and flips it OFF.",
  "Then the motor reverses to retract the finger back to the home position.",
  "A limit switch stops the motor at the home position for repeatable resets.",
];

const howItWorksB = [
  "Arduino reads the toggle and limit switch (with internal pull-ups for stable inputs).",
  "Control is implemented as a state machine: forward → flip OFF → reverse → stop at home.",
  "Delays and speed changes create different “personalities” without changing the mechanism.",
];

const personalities = [
  "Immediate: reacts quickly and resets cleanly.",
  "Random delay: waits a random time before reacting.",
  "Hesitation / slow: pauses mid-move or moves slowly for comedic effect.",
];

const highlights = [
  "Same mechanism, different control approach → noticeably different user experience.",
  "Tuned reliability around real-world issues (bounce, timing, endstop behavior).",
  "Full integration: mechanical fit + wiring + control all within a small enclosure.",
];

const assets = {
  physical: "projects/useless-box/physical.jpg",
  digital: "projects/useless-box/digital.jpg",
  demo: "projects/useless-box/demo.mp4",
};
---

<BaseLayout title={`${title} | Cooper Lender`} lang="en">
  <a href="../../" class="muted">← Back</a>

  <h1>{title}</h1>
  <p class="muted">{subtitle}</p>

  <div class="card">
    <h2>Overview</h2>
    <ul>
      <li><strong>Goal:</strong> {overview.goal}</li>
      <li><strong>Built:</strong> {overview.built}</li>
      <li><strong>My role:</strong> {overview.role}</li>
      <li><strong>Tech:</strong> {overview.tech}</li>
    </ul>
  </div>

  <div class="card">
    <h2>Version A: Hardware-focused control</h2>
    <ul>
      {howItWorksA.map((x) => <li>{x}</li>)}
    </ul>

    <div class="muted" style="margin-top: 10px;">Physical version photo:</div>
    <img
      src={`${import.meta.env.BASE_URL}${assets.physical}`}
      alt="Useless Box physical version"
      loading="lazy"
      style="width:100%; border-radius:12px; margin-top:10px;"
    />
  </div>

  <div class="card">
    <h2>Version B: Arduino control (“personalities”)</h2>
    <ul>
      {howItWorksB.map((x) => <li>{x}</li>)}
    </ul>

    <h3 style="margin-top:14px;">Behavior patterns</h3>
    <ul>
      {personalities.map((x) => <li>{x}</li>)}
    </ul>

    <div class="muted" style="margin-top: 10px;">Arduino version photo:</div>
    <img
      src={`${import.meta.env.BASE_URL}${assets.digital}`}
      alt="Useless Box Arduino version"
      loading="lazy"
      style="width:100%; border-radius:12px; margin-top:10px;"
    />

    <div class="muted" style="margin-top: 14px;">Demo video:</div>
    <video controls preload="metadata" style="width:100%; border-radius:12px; margin-top:10px;">
      <source src={`${import.meta.env.BASE_URL}${assets.demo}`} type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>

  <div class="card">
    <h2>Highlights</h2>
    <ul>
      {highlights.map((x) => <li>{x}</li>)}
    </ul>
  </div>

  <div class="card">
    <h2>Further improvements</h2>
    <ul>
      <li>Strengthen debouncing + state guards for even more robust behavior.</li>
      <li>Add current sensing / stall detection to protect the motor.</li>
      <li>Move wiring to a small PCB or harness for repeatability.</li>
    </ul>
  </div>
</BaseLayout>
