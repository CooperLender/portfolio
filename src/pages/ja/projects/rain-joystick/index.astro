---
import BaseLayout from "../../../../layouts/BaseLayout.astro";

const title = "ジョイスティック操作の雨アニメーション（8×8 LEDマトリクス）";
const subtitle =
  "ジョイスティック入力で落下方向（重力方向）を切り替え、雨粒の流れがその場で変わるインタラクティブ表示。";

const overview = {
  goal:
    "入力に対して直感的に反応する、手触りの良いインタラクティブなLED表示を作る。",
  built:
    "8×8 LEDマトリクスに雨粒をアニメーション表示。ジョイスティックの方向に応じて落下方向を変更し、逆側の端から雨粒をランダム生成して流れを維持する。",
  role:
    "チーム制作。私は主にハードウェア側（LEDマトリクス/ジョイスティックの配線、ピン割り当て確認、点灯不良の切り分け）を担当し、表示更新や入力の安定化も一緒に詰めた。",
  tech:
    "Arduino（C/C++）、LEDマトリクスの行走査（多重化）、アナログジョイスティック入力＋デッドゾーン、乱数生成、一定周期での状態更新。",
};

const howItWorks = [
  "表示状態を8×8の配列（表示バッファ）として保持する。",
  "一定周期ごとに、現在の落下方向へ1マスずつパターンをシフトして“重力”を表現する。",
  "移動方向と逆側の端から雨粒をランダムに生成し、端で自然に入れ替わるようにする。",
  "ジョイスティックのアナログ値からUP/DOWN/LEFT/RIGHTを判定し、デッドゾーンで手ブレや中立付近の揺れを抑える。",
  "落下中でも方向を切り替えられ、雨粒の進行方向が即座に変化する。",
];

const highlights = [
  "デッドゾーン＋閾値で入力を安定化し、操作感を改善。",
  "雨粒生成をランダム化して、単調になりにくい見た目に。",
  "行走査（多重化）で8×8マトリクスを効率よく駆動。",
];

const results = [
  "ジョイスティック操作に対して素早く落下方向が切り替わる。",
  "雨粒が端で循環し、常に動きのある表示を維持できる。",
];

const assets = {
  photo: "projects/rain-joystick/project.jpg",
};
---

<BaseLayout title={`${title} | Cooper Lender`} lang="ja">
  <a href="../../" class="muted">← 戻る</a>

  <h1>{title}</h1>
  <p class="muted">{subtitle}</p>

  <div class="card">
    <h2>概要</h2>
    <ul>
      <li><strong>目的：</strong> {overview.goal}</li>
      <li><strong>実装内容：</strong> {overview.built}</li>
      <li><strong>担当：</strong> {overview.role}</li>
      <li><strong>使用技術：</strong> {overview.tech}</li>
    </ul>
  </div>

  <div class="card">
    <h2>仕組み</h2>
    <ul>
      {howItWorks.map((x) => <li>{x}</li>)}
    </ul>
  </div>

  <div class="card">
    <h2>工夫点</h2>
    <ul>
      {highlights.map((x) => <li>{x}</li>)}
    </ul>

    <div class="muted" style="margin-top: 10px;">プロジェクト写真：</div>
    <img
      src={`${import.meta.env.BASE_URL}${assets.photo}`}
      alt="ジョイスティック操作の雨アニメーション（8×8 LEDマトリクス）"
      loading="lazy"
      style="width:100%; border-radius:12px; margin-top:10px;"
    />
  </div>

  <div class="card">
    <h2>結果</h2>
    <ul>
      {results.map((x) => <li>{x}</li>)}
    </ul>
  </div>

  <div class="card">
    <h2>今後の改善</h2>
    <ul>
      <li>明るさ制御や走査の最適化でフリッカを抑え、見た目を改善する。</li>
      <li>雨量（生成頻度）や速度を可変にして表現の幅を広げる。</li>
      <li>しぶき・残像などの演出を追加しつつ、フレーム時間を安定させる。</li>
    </ul>
  </div>
</BaseLayout>
